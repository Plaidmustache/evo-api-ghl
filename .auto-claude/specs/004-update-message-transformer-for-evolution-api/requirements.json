{
  "task_description": "Update the message transformer to convert between Evolution API and GHL message formats.\n\n## Update: src/ghl/ghl.transformer.ts\n\n### Update toPlatformMessage() method:\n\nInput is now Evolution API webhook format. Extract:\n- Phone number: from data.key.remoteJid (remove @s.whatsapp.net or @g.us suffix)\n- Sender name: from data.pushName\n- Message text: from data.message.conversation OR data.message.extendedTextMessage.text\n- Message ID: from data.key.id\n- Timestamp: from data.messageTimestamp\n\nHandle different message types:\n- conversation → text message\n- extendedTextMessage → text with link preview\n- imageMessage → image attachment (get URL from data.message.imageMessage)\n- videoMessage → video attachment\n- audioMessage → audio attachment  \n- documentMessage → document attachment\n\n### Rename toGreenApiMessage() → toEvolutionMessage()\n\nConvert GHL outbound message to Evolution API format:\n- Input: { contactPhone, message, attachments }\n- Output for text: { number: contactPhone, text: message }\n- Output for media: { number: contactPhone, mediatype: 'image'|'video'|'document', media: url, caption: message }\n\n### Update helper methods:\n\n- Update extractPhoneFromJid(remoteJid: string) - extracts clean phone number\n- Update isGroupMessage(remoteJid: string) - checks for @g.us suffix\n- Keep GHL-side transformations (output to GHL) unchanged\n\nThe GHL platform message format stays the same - we're only changing the Evolution API side.",
  "workflow_type": "feature"
}